jQuery(document).ready(function($){var visionTrigger=$('.cd-3d-trigger'),galleryItems=$('.no-touch #cd-gallery-items').children('li'),galleryNavigation=$('.cd-item-navigation a');visionTrigger.on('click',function(){$this=$(this);if($this.parent('li').hasClass('active')){$this.parent('li').removeClass('active');hideNavigation($this.parent('li').find('.cd-item-navigation'))}else{$this.parent('li').addClass('active');updateNavigation($this.parent('li').find('.cd-item-navigation'),$this.parent('li').find('.cd-item-wrapper'))}});galleryItems.hover(function(){$this=$(this).children('.cd-item-wrapper');updateNavigation($this.siblings('nav').find('.cd-item-navigation').eq(0),$this)},function(){$this=$(this).children('.cd-item-wrapper');hideNavigation($this.siblings('nav').find('.cd-item-navigation').eq(0))});galleryNavigation.on('click',function(){var navigationAnchor=$(this);direction=navigationAnchor.text(),activeContainer=navigationAnchor.parents('nav').eq(0).siblings('.cd-item-wrapper');(direction=="Next")?showNextSlide(activeContainer):showPreviousSlide(activeContainer);updateNavigation(navigationAnchor.parents('.cd-item-navigation').eq(0),activeContainer)})});function showNextSlide(container){var itemToHide=container.find('.cd-item-front'),itemToShow=container.find('.cd-item-middle'),itemMiddle=container.find('.cd-item-back'),itemToBack=container.find('.cd-item-out').eq(0);itemToHide.addClass('move-right').removeClass('cd-item-front').one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',function(){itemToHide.addClass('hidden')});itemToShow.addClass('cd-item-front').removeClass('cd-item-middle');itemMiddle.addClass('cd-item-middle').removeClass('cd-item-back');itemToBack.addClass('cd-item-back').removeClass('cd-item-out')}
function showPreviousSlide(container){var itemToMiddle=container.find('.cd-item-front'),itemToBack=container.find('.cd-item-middle'),itemToShow=container.find('.move-right').slice(-1),itemToOut=container.find('.cd-item-back');itemToShow.removeClass('hidden').addClass('cd-item-front');itemToMiddle.removeClass('cd-item-front').addClass('cd-item-middle');itemToBack.removeClass('cd-item-middle').addClass('cd-item-back');itemToOut.removeClass('cd-item-back').addClass('cd-item-out');var stop=setInterval(checkClass,100);function checkClass(){if(!itemToShow.hasClass('hidden')){itemToShow.removeClass('move-right');window.clearInterval(stop)}}}
function updateNavigation(navigation,container){var isNextActive=(container.find('.cd-item-middle').length>0)?!0:!1,isPrevActive=(container.children('li').eq(0).hasClass('cd-item-front'))?!1:!0;(isNextActive)?navigation.find('a').eq(1).addClass('visible'):navigation.find('a').eq(1).removeClass('visible');(isPrevActive)?navigation.find('a').eq(0).addClass('visible'):navigation.find('a').eq(0).removeClass('visible')}
function hideNavigation(navigation){navigation.find('a').removeClass('visible')}